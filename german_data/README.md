# Data and Model Descriptions - AIOLOS Project

## Overview
This repository is designed for early alert and monitoring in the context of the AIOLOS project. The project involves analyzing various datasets, including CGM/Docmetric data, social media data (Google Trends), and surveillance data related to COVID-19, Influenza, and RSV cases. The repository contains scripts for data preprocessing, modeling, and forecasting files.

## Data Categories

### 1. CGM/Docmetric Data
- **Diagnoses:** Diagnoses of respiratory diseases grouped into ICD-10 categories on a weekly basis.
- **Prescriptions:** Prescribed drugs for respiratory diseases grouped into ATC categories on a weekly basis.
- **Pharmacy Sells:** Pharmacy sells of respiratory disease-related drugs grouped into ATC categories on a weekly basis.

### 2. Social Media Data (Google Trends)
- **Google_symptoms_de:** Counts of symptoms retrieved from Google Trends in Germany for the past 5 weeks.
- **Google_symptoms_fr:** Counts of symptoms retrieved from Google Trends in France for the past 5 weeks.

### 3. Surveillance Data
- **COVID Cases, Deaths, Hospitalization:** Daily cases, deaths, and hospitalization data for COVID-19, stratified by region and age group.
- **Influenza Cases:** Weekly Influenza cases, stratified by region.
- **RSV Cases:** Weekly RSV cases in Saxony.

## Output Files
The output directory contains files generated by the models, including current trends and short-term forecasts, for various indicators such as COVID cases, deaths, hospitalization, Influenza cases, RSV cases, etc.


## Data Retrieval
1. **CGM Data:** Provided directly by CGM.
2. **Social Media Data (Google Trends):** Respiratory symptoms data and scripts for data retrieval from the Google Trends API will be provided.
3. **Surveillance Data:**
   - **COVID Data:** Available on GitHub
   - **Influenza and RSV Data:** Stored in the survstat database.

## Data Preprocessing
The preprocessing scripts (`preprocessing_*.py`) handle the transformation of raw data into the desired formats used by the models. The formats may differ from those presented in the corresponding files. Detailed instructions for preprocessing are provided in the code comments.

## Modeling
The models estimate the current trend of time series data and to calculate short term forecasts.
The underlying idea is that the time series follows exponential like behavior,
which - when log transformed - yields piece wise linear behavior. 
Therefore a linear regression is applied on the log transformed data with a fitting window
of config.size_FW. There are two models:

### 1. log_linear_alert
- Estimates the current trend of each numeric column of the input time series.
- Performs a log-linear regression to estimate the slope, transformed to a relative slope in percent (including a 95% CI).
- Maps the relative slope to an arrow angle for visualization in a dashboard.

### 2. log_linear_forecast
- Calculates short-term forecasts for the input surveillance data.
- Performs a log-linear regression to estimate the regression parameters used to calculate a two-week prediction (including a 95% CI).

## Sources
- **Surveillance Data:** The surveillance data (COVID, RSV and Influenza) are from the RKI. The COVID data from https://github.com/robert-koch-institut/ SARS-CoV-2-Infektionen_in_Deutschland. And the RSV and Influenza from Survstat https://survstat.rki.de.
- **CGM Data:** The diagnoses, prescription and pharmacy sell data is from CGM and can be accessed from their sftp server.
- **Respiratory Symptoms:** Fraunhofer search.

